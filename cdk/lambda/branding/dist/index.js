"use strict";var l=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var s in t)l(e,s,{get:t[s],enumerable:!0})},I=(e,t,s,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of f(t))!h.call(e,i)&&i!==s&&l(e,i,{get:()=>t[i],enumerable:!(r=u(t,i))||r.enumerable});return e};var V=e=>I(l({},"__esModule",{value:!0}),e);var C={};m(C,{handler:()=>A});module.exports=V(C);var c=require("@aws-sdk/client-s3");var d=require("@aws-sdk/client-cognito-identity-provider"),U=require("@aws-sdk/client-dynamodb");var k=require("@aws-sdk/client-s3"),y=require("@aws-sdk/client-s3"),R=new c.S3Client({region:process.env.AWS_REGION}),A=async e=>{console.info(`EVENT
`+JSON.stringify(e,null,2)),console.log("event.requestContext.http.method: ",e.requestContext.http.method);let t={"Access-Control-Allow-Headers":"Content-Type,Authorization,X-Api-Key,X-Requested-With","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"OPTIONS,GET,PUT"},s=(o=200,n)=>(console.log("return with:",{statusCode:o,headers:t,body:n}),{statusCode:o,headers:t,body:n}),r=e.headers.authorization,i=async(o,n)=>{let a={Bucket:o==="spportal"?process.env.SPPORTAL_BUCKETNAME:process.env.ADMINPORTAL_BUCKETNAME,Key:"branding.json"},p=await(await n.send(new k.GetObjectCommand(a))).Body.transformToString();return JSON.parse(p)},T=async(o,n)=>{let a={Bucket:o.type==="spportal"?process.env.SPPORTAL_BUCKETNAME:process.env.ADMINPORTAL_BUCKETNAME,Key:"branding.json",Body:JSON.stringify(o)};return await n.send(new y.PutObjectCommand(a)),o};try{switch(e.requestContext.http.method){case"GET":let o=await i(e.pathParameters?.id,R);return s(200,JSON.stringify({data:o}));case"PUT":let n=JSON.parse(e.body),a=await T(n.data);return s(200,JSON.stringify({data:a}));case"OPTIONS":return s(200,JSON.stringify({data:"ok"}));default:return s(404,JSON.stringify({data:"Not Found"}))}}catch(o){console.log("Catch an error: ",o)}return{statusCode:500,headers:t,body:JSON.stringify({type:"exception",message:"Service Error"})}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
