"use strict";var wr=Object.create;var st=Object.defineProperty;var Tr=Object.getOwnPropertyDescriptor;var Dr=Object.getOwnPropertyNames;var Er=Object.getPrototypeOf,Nr=Object.prototype.hasOwnProperty;var F=(f,s)=>()=>(s||f((s={exports:{}}).exports,s),s.exports),br=(f,s)=>{for(var E in s)st(f,E,{get:s[E],enumerable:!0})},Bt=(f,s,E,O)=>{if(s&&typeof s=="object"||typeof s=="function")for(let c of Dr(s))!Nr.call(f,c)&&c!==E&&st(f,c,{get:()=>s[c],enumerable:!(O=Tr(s,c))||O.enumerable});return f};var Ir=(f,s,E)=>(E=f!=null?wr(Er(f)):{},Bt(s||!f||!f.__esModule?st(E,"default",{value:f,enumerable:!0}):E,f)),Or=f=>Bt(st({},"__esModule",{value:!0}),f);var at=F(Ct=>{(function(){Ct.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Ct)});var H=F((Vt,Z)=>{(function(){var f,s,E,O,c,w,o,l=[].slice,y={}.hasOwnProperty;f=function(){var g,I,N,m,h,d;if(d=arguments[0],h=2<=arguments.length?l.call(arguments,1):[],c(Object.assign))Object.assign.apply(null,arguments);else for(g=0,N=h.length;g<N;g++)if(m=h[g],m!=null)for(I in m)y.call(m,I)&&(d[I]=m[I]);return d},c=function(g){return!!g&&Object.prototype.toString.call(g)==="[object Function]"},w=function(g){var I;return!!g&&((I=typeof g)=="function"||I==="object")},E=function(g){return c(Array.isArray)?Array.isArray(g):Object.prototype.toString.call(g)==="[object Array]"},O=function(g){var I;if(E(g))return!g.length;for(I in g)if(y.call(g,I))return!1;return!0},o=function(g){var I,N;return w(g)&&(N=Object.getPrototypeOf(g))&&(I=N.constructor)&&typeof I=="function"&&I instanceof I&&Function.prototype.toString.call(I)===Function.prototype.toString.call(Object)},s=function(g){return c(g.valueOf)?g.valueOf():g},Z.exports.assign=f,Z.exports.isFunction=c,Z.exports.isObject=w,Z.exports.isArray=E,Z.exports.isEmpty=O,Z.exports.isPlainObject=o,Z.exports.getValue=s}).call(Vt)});var At=F((kt,Gt)=>{(function(){var f;Gt.exports=f=function(){function s(){}return s.prototype.hasFeature=function(E,O){return!0},s.prototype.createDocumentType=function(E,O,c){throw new Error("This DOM method is not implemented.")},s.prototype.createDocument=function(E,O,c){throw new Error("This DOM method is not implemented.")},s.prototype.createHTMLDocument=function(E){throw new Error("This DOM method is not implemented.")},s.prototype.getFeature=function(E,O){throw new Error("This DOM method is not implemented.")},s}()}).call(kt)});var zt=F((Wt,Yt)=>{(function(){var f;Yt.exports=f=function(){function s(){}return s.prototype.handleError=function(E){throw new Error(E)},s}()}).call(Wt)});var Qt=F((Kt,Ht)=>{(function(){var f;Ht.exports=f=function(){function s(E){this.arr=E||[]}return Object.defineProperty(s.prototype,"length",{get:function(){return this.arr.length}}),s.prototype.item=function(E){return this.arr[E]||null},s.prototype.contains=function(E){return this.arr.indexOf(E)!==-1},s}()}).call(Kt)});var Zt=F(($t,Jt)=>{(function(){var f,s,E;s=zt(),E=Qt(),Jt.exports=f=function(){function O(){var c;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new s,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=c=Object.create(this.defaultParams)}return Object.defineProperty(O.prototype,"parameterNames",{get:function(){return new E(Object.keys(this.defaultParams))}}),O.prototype.getParameter=function(c){return this.params.hasOwnProperty(c)?this.params[c]:null},O.prototype.canSetParameter=function(c,w){return!0},O.prototype.setParameter=function(c,w){return w!=null?this.params[c]=w:delete this.params[c]},O}()}).call($t)});var U=F((te,ee)=>{(function(){ee.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(te)});var Pt=F((re,ie)=>{(function(){var f,s,E;f=U(),E=Y(),ie.exports=s=function(){function O(c,w,o){if(this.parent=c,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),w==null)throw new Error("Missing attribute name. "+this.debugInfo(w));this.name=this.stringify.name(w),this.value=this.stringify.attValue(o),this.type=f.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(O.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(O.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(O.prototype,"textContent",{get:function(){return this.value},set:function(c){return this.value=c||""}}),Object.defineProperty(O.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(O.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(O.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(O.prototype,"specified",{get:function(){return!0}}),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(c){return this.options.writer.attribute(this,this.options.writer.filterOptions(c))},O.prototype.debugInfo=function(c){return c=c||this.name,c==null?"parent: <"+this.parent.name+">":"attribute: {"+c+"}, parent: <"+this.parent.name+">"},O.prototype.isEqualNode=function(c){return!(c.namespaceURI!==this.namespaceURI||c.prefix!==this.prefix||c.localName!==this.localName||c.value!==this.value)},O}()}).call(re)});var ut=F((ne,oe)=>{(function(){var f;oe.exports=f=function(){function s(E){this.nodes=E}return Object.defineProperty(s.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),s.prototype.clone=function(){return this.nodes=null},s.prototype.getNamedItem=function(E){return this.nodes[E]},s.prototype.setNamedItem=function(E){var O;return O=this.nodes[E.nodeName],this.nodes[E.nodeName]=E,O||null},s.prototype.removeNamedItem=function(E){var O;return O=this.nodes[E],delete this.nodes[E],O||null},s.prototype.item=function(E){return this.nodes[Object.keys(this.nodes)[E]]||null},s.prototype.getNamedItemNS=function(E,O){throw new Error("This DOM method is not implemented.")},s.prototype.setNamedItemNS=function(E){throw new Error("This DOM method is not implemented.")},s.prototype.removeNamedItemNS=function(E,O){throw new Error("This DOM method is not implemented.")},s}()}).call(ne)});var ct=F((se,ae)=>{(function(){var f,s,E,O,c,w,o,l,y,g=function(N,m){for(var h in m)I.call(m,h)&&(N[h]=m[h]);function d(){this.constructor=N}return d.prototype=m.prototype,N.prototype=new d,N.__super__=m.prototype,N},I={}.hasOwnProperty;y=H(),l=y.isObject,o=y.isFunction,w=y.getValue,c=Y(),f=U(),s=Pt(),O=ut(),ae.exports=E=function(N){g(m,N);function m(h,d,T){var v,L,C,u;if(m.__super__.constructor.call(this,h),d==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(d),this.type=f.Element,this.attribs={},this.schemaTypeInfo=null,T!=null&&this.attribute(T),h.type===f.Document&&(this.isRoot=!0,this.documentObject=h,h.rootObject=this,h.children)){for(u=h.children,L=0,C=u.length;L<C;L++)if(v=u[L],v.type===f.DocType){v.name=this.name;break}}}return Object.defineProperty(m.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(m.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(m.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(m.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(m.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(m.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(m.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(m.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new O(this.attribs)),this.attributeMap}}),m.prototype.clone=function(){var h,d,T,v;T=Object.create(this),T.isRoot&&(T.documentObject=null),T.attribs={},v=this.attribs;for(d in v)I.call(v,d)&&(h=v[d],T.attribs[d]=h.clone());return T.children=[],this.children.forEach(function(L){var C;return C=L.clone(),C.parent=T,T.children.push(C)}),T},m.prototype.attribute=function(h,d){var T,v;if(h!=null&&(h=w(h)),l(h))for(T in h)I.call(h,T)&&(v=h[T],this.attribute(T,v));else o(d)&&(d=d.apply()),this.options.keepNullAttributes&&d==null?this.attribs[h]=new s(this,h,""):d!=null&&(this.attribs[h]=new s(this,h,d));return this},m.prototype.removeAttribute=function(h){var d,T,v;if(h==null)throw new Error("Missing attribute name. "+this.debugInfo());if(h=w(h),Array.isArray(h))for(T=0,v=h.length;T<v;T++)d=h[T],delete this.attribs[d];else delete this.attribs[h];return this},m.prototype.toString=function(h){return this.options.writer.element(this,this.options.writer.filterOptions(h))},m.prototype.att=function(h,d){return this.attribute(h,d)},m.prototype.a=function(h,d){return this.attribute(h,d)},m.prototype.getAttribute=function(h){return this.attribs.hasOwnProperty(h)?this.attribs[h].value:null},m.prototype.setAttribute=function(h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getAttributeNode=function(h){return this.attribs.hasOwnProperty(h)?this.attribs[h]:null},m.prototype.setAttributeNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.removeAttributeNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getAttributeNS=function(h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.setAttributeNS=function(h,d,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.removeAttributeNS=function(h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getAttributeNodeNS=function(h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.setAttributeNodeNS=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagNameNS=function(h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.hasAttribute=function(h){return this.attribs.hasOwnProperty(h)},m.prototype.hasAttributeNS=function(h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.setIdAttribute=function(h,d){return this.attribs.hasOwnProperty(h)?this.attribs[h].isId:d},m.prototype.setIdAttributeNS=function(h,d,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.setIdAttributeNode=function(h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagNameNS=function(h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByClassName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.isEqualNode=function(h){var d,T,v;if(!m.__super__.isEqualNode.apply(this,arguments).isEqualNode(h)||h.namespaceURI!==this.namespaceURI||h.prefix!==this.prefix||h.localName!==this.localName||h.attribs.length!==this.attribs.length)return!1;for(d=T=0,v=this.attribs.length-1;0<=v?T<=v:T>=v;d=0<=v?++T:--T)if(!this.attribs[d].isEqualNode(h.attribs[d]))return!1;return!0},m}(c)}).call(se)});var nt=F((ue,ce)=>{(function(){var f,s,E=function(c,w){for(var o in w)O.call(w,o)&&(c[o]=w[o]);function l(){this.constructor=c}return l.prototype=w.prototype,c.prototype=new l,c.__super__=w.prototype,c},O={}.hasOwnProperty;s=Y(),ce.exports=f=function(c){E(w,c);function w(o){w.__super__.constructor.call(this,o),this.value=""}return Object.defineProperty(w.prototype,"data",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(w.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(w.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),w.prototype.clone=function(){return Object.create(this)},w.prototype.substringData=function(o,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.appendData=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.insertData=function(o,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.deleteData=function(o,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.replaceData=function(o,l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.isEqualNode=function(o){return!(!w.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.data!==this.data)},w}(s)}).call(ue)});var lt=F((le,he)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;f=U(),E=nt(),he.exports=s=function(w){O(o,w);function o(l,y){if(o.__super__.constructor.call(this,l),y==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=f.CData,this.value=this.stringify.cdata(y)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.cdata(this,this.options.writer.filterOptions(l))},o}(E)}).call(le)});var ht=F((fe,pe)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;f=U(),s=nt(),pe.exports=E=function(w){O(o,w);function o(l,y){if(o.__super__.constructor.call(this,l),y==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=f.Comment,this.value=this.stringify.comment(y)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.comment(this,this.options.writer.filterOptions(l))},o}(s)}).call(fe)});var ft=F((de,ye)=>{(function(){var f,s,E,O,c=function(o,l){for(var y in l)w.call(l,y)&&(o[y]=l[y]);function g(){this.constructor=o}return g.prototype=l.prototype,o.prototype=new g,o.__super__=l.prototype,o},w={}.hasOwnProperty;O=H().isObject,E=Y(),f=U(),ye.exports=s=function(o){c(l,o);function l(y,g,I,N){var m;l.__super__.constructor.call(this,y),O(g)&&(m=g,g=m.version,I=m.encoding,N=m.standalone),g||(g="1.0"),this.type=f.Declaration,this.version=this.stringify.xmlVersion(g),I!=null&&(this.encoding=this.stringify.xmlEncoding(I)),N!=null&&(this.standalone=this.stringify.xmlStandalone(N))}return l.prototype.toString=function(y){return this.options.writer.declaration(this,this.options.writer.filterOptions(y))},l}(E)}).call(de)});var pt=F((me,ge)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;E=Y(),f=U(),ge.exports=s=function(w){O(o,w);function o(l,y,g,I,N,m){if(o.__super__.constructor.call(this,l),y==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(g==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(y));if(!I)throw new Error("Missing DTD attribute type. "+this.debugInfo(y));if(!N)throw new Error("Missing DTD attribute default. "+this.debugInfo(y));if(N.indexOf("#")!==0&&(N="#"+N),!N.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(y));if(m&&!N.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(y));this.elementName=this.stringify.name(y),this.type=f.AttributeDeclaration,this.attributeName=this.stringify.name(g),this.attributeType=this.stringify.dtdAttType(I),m&&(this.defaultValue=this.stringify.dtdAttDefault(m)),this.defaultValueType=N}return o.prototype.toString=function(l){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(l))},o}(E)}).call(me)});var dt=F((we,Te)=>{(function(){var f,s,E,O,c=function(o,l){for(var y in l)w.call(l,y)&&(o[y]=l[y]);function g(){this.constructor=o}return g.prototype=l.prototype,o.prototype=new g,o.__super__=l.prototype,o},w={}.hasOwnProperty;O=H().isObject,E=Y(),f=U(),Te.exports=s=function(o){c(l,o);function l(y,g,I,N){if(l.__super__.constructor.call(this,y),I==null)throw new Error("Missing DTD entity name. "+this.debugInfo(I));if(N==null)throw new Error("Missing DTD entity value. "+this.debugInfo(I));if(this.pe=!!g,this.name=this.stringify.name(I),this.type=f.EntityDeclaration,!O(N))this.value=this.stringify.dtdEntityValue(N),this.internal=!0;else{if(!N.pubID&&!N.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(I));if(N.pubID&&!N.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(I));if(this.internal=!1,N.pubID!=null&&(this.pubID=this.stringify.dtdPubID(N.pubID)),N.sysID!=null&&(this.sysID=this.stringify.dtdSysID(N.sysID)),N.nData!=null&&(this.nData=this.stringify.dtdNData(N.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(I))}}return Object.defineProperty(l.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(l.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(l.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(l.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"xmlVersion",{get:function(){return null}}),l.prototype.toString=function(y){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(y))},l}(E)}).call(we)});var yt=F((De,Ee)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;E=Y(),f=U(),Ee.exports=s=function(w){O(o,w);function o(l,y,g){if(o.__super__.constructor.call(this,l),y==null)throw new Error("Missing DTD element name. "+this.debugInfo());g||(g="(#PCDATA)"),Array.isArray(g)&&(g="("+g.join(",")+")"),this.name=this.stringify.name(y),this.type=f.ElementDeclaration,this.value=this.stringify.dtdElementValue(g)}return o.prototype.toString=function(l){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(l))},o}(E)}).call(De)});var mt=F((Ne,be)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;E=Y(),f=U(),be.exports=s=function(w){O(o,w);function o(l,y,g){if(o.__super__.constructor.call(this,l),y==null)throw new Error("Missing DTD notation name. "+this.debugInfo(y));if(!g.pubID&&!g.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(y));this.name=this.stringify.name(y),this.type=f.NotationDeclaration,g.pubID!=null&&(this.pubID=this.stringify.dtdPubID(g.pubID)),g.sysID!=null&&(this.sysID=this.stringify.dtdSysID(g.sysID))}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(l){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(l))},o}(E)}).call(Ne)});var gt=F((Ie,Oe)=>{(function(){var f,s,E,O,c,w,o,l,y,g=function(N,m){for(var h in m)I.call(m,h)&&(N[h]=m[h]);function d(){this.constructor=N}return d.prototype=m.prototype,N.prototype=new d,N.__super__=m.prototype,N},I={}.hasOwnProperty;y=H().isObject,l=Y(),f=U(),s=pt(),O=dt(),E=yt(),c=mt(),o=ut(),Oe.exports=w=function(N){g(m,N);function m(h,d,T){var v,L,C,u,r,t;if(m.__super__.constructor.call(this,h),this.type=f.DocType,h.children){for(u=h.children,L=0,C=u.length;L<C;L++)if(v=u[L],v.type===f.Element){this.name=v.name;break}}this.documentObject=h,y(d)&&(r=d,d=r.pubID,T=r.sysID),T==null&&(t=[d,T],T=t[0],d=t[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),T!=null&&(this.sysID=this.stringify.dtdSysID(T))}return Object.defineProperty(m.prototype,"entities",{get:function(){var h,d,T,v,L;for(v={},L=this.children,d=0,T=L.length;d<T;d++)h=L[d],h.type===f.EntityDeclaration&&!h.pe&&(v[h.name]=h);return new o(v)}}),Object.defineProperty(m.prototype,"notations",{get:function(){var h,d,T,v,L;for(v={},L=this.children,d=0,T=L.length;d<T;d++)h=L[d],h.type===f.NotationDeclaration&&(v[h.name]=h);return new o(v)}}),Object.defineProperty(m.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(m.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(m.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),m.prototype.element=function(h,d){var T;return T=new E(this,h,d),this.children.push(T),this},m.prototype.attList=function(h,d,T,v,L){var C;return C=new s(this,h,d,T,v,L),this.children.push(C),this},m.prototype.entity=function(h,d){var T;return T=new O(this,!1,h,d),this.children.push(T),this},m.prototype.pEntity=function(h,d){var T;return T=new O(this,!0,h,d),this.children.push(T),this},m.prototype.notation=function(h,d){var T;return T=new c(this,h,d),this.children.push(T),this},m.prototype.toString=function(h){return this.options.writer.docType(this,this.options.writer.filterOptions(h))},m.prototype.ele=function(h,d){return this.element(h,d)},m.prototype.att=function(h,d,T,v,L){return this.attList(h,d,T,v,L)},m.prototype.ent=function(h,d){return this.entity(h,d)},m.prototype.pent=function(h,d){return this.pEntity(h,d)},m.prototype.not=function(h,d){return this.notation(h,d)},m.prototype.up=function(){return this.root()||this.documentObject},m.prototype.isEqualNode=function(h){return!(!m.__super__.isEqualNode.apply(this,arguments).isEqualNode(h)||h.name!==this.name||h.publicId!==this.publicId||h.systemId!==this.systemId)},m}(l)}).call(Ie)});var wt=F((Ce,Ae)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;f=U(),s=Y(),Ae.exports=E=function(w){O(o,w);function o(l,y){if(o.__super__.constructor.call(this,l),y==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=f.Raw,this.value=this.stringify.raw(y)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.raw(this,this.options.writer.filterOptions(l))},o}(s)}).call(Ce)});var Tt=F((Pe,_e)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;f=U(),s=nt(),_e.exports=E=function(w){O(o,w);function o(l,y){if(o.__super__.constructor.call(this,l),y==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=f.Text,this.value=this.stringify.text(y)}return Object.defineProperty(o.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"wholeText",{get:function(){var l,y,g;for(g="",y=this.previousSibling;y;)g=y.data+g,y=y.previousSibling;for(g+=this.data,l=this.nextSibling;l;)g=g+l.data,l=l.nextSibling;return g}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.text(this,this.options.writer.filterOptions(l))},o.prototype.splitText=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceWholeText=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o}(s)}).call(Pe)});var Dt=F((Le,Me)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;f=U(),s=nt(),Me.exports=E=function(w){O(o,w);function o(l,y,g){if(o.__super__.constructor.call(this,l),y==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=f.ProcessingInstruction,this.target=this.stringify.insTarget(y),this.name=this.target,g&&(this.value=this.stringify.insValue(g))}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(l))},o.prototype.isEqualNode=function(l){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.target!==this.target)},o}(s)}).call(Le)});var _t=F((ve,Se)=>{(function(){var f,s,E,O=function(w,o){for(var l in o)c.call(o,l)&&(w[l]=o[l]);function y(){this.constructor=w}return y.prototype=o.prototype,w.prototype=new y,w.__super__=o.prototype,w},c={}.hasOwnProperty;E=Y(),f=U(),Se.exports=s=function(w){O(o,w);function o(l){o.__super__.constructor.call(this,l),this.type=f.Dummy}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return""},o}(E)}).call(ve)});var qe=F((xe,Fe)=>{(function(){var f;Fe.exports=f=function(){function s(E){this.nodes=E}return Object.defineProperty(s.prototype,"length",{get:function(){return this.nodes.length||0}}),s.prototype.clone=function(){return this.nodes=null},s.prototype.item=function(E){return this.nodes[E]||null},s}()}).call(xe)});var je=F((Xe,Re)=>{(function(){Re.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Xe)});var Y=F((Ue,Be)=>{(function(){var f,s,E,O,c,w,o,l,y,g,I,N,m,h,d,T,v,L,C,u={}.hasOwnProperty;C=H(),L=C.isObject,v=C.isFunction,T=C.isEmpty,d=C.getValue,l=null,E=null,O=null,c=null,w=null,m=null,h=null,N=null,o=null,s=null,I=null,y=null,f=null,Be.exports=g=function(){function r(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=ct(),E=lt(),O=ht(),c=ft(),w=gt(),m=wt(),h=Tt(),N=Dt(),o=_t(),s=U(),I=qe(),y=ut(),f=je())}return Object.defineProperty(r.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new I(this.children)),this.childNodeList}}),Object.defineProperty(r.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(r.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(r.prototype,"previousSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t-1]||null}}),Object.defineProperty(r.prototype,"nextSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t+1]||null}}),Object.defineProperty(r.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(r.prototype,"textContent",{get:function(){var t,a,A,i,P;if(this.nodeType===s.Element||this.nodeType===s.DocumentFragment){for(P="",i=this.children,a=0,A=i.length;a<A;a++)t=i[a],t.textContent&&(P+=t.textContent);return P}else return null},set:function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),r.prototype.setParent=function(t){var a,A,i,P,p;for(this.parent=t,t&&(this.options=t.options,this.stringify=t.stringify),P=this.children,p=[],A=0,i=P.length;A<i;A++)a=P[A],p.push(a.setParent(this));return p},r.prototype.element=function(t,a,A){var i,P,p,b,M,S,q,X,x,B,R;if(S=null,a===null&&A==null&&(x=[{},null],a=x[0],A=x[1]),a==null&&(a={}),a=d(a),L(a)||(B=[a,A],A=B[0],a=B[1]),t!=null&&(t=d(t)),Array.isArray(t))for(p=0,q=t.length;p<q;p++)P=t[p],S=this.element(P);else if(v(t))S=this.element(t.apply());else if(L(t)){for(M in t)if(u.call(t,M))if(R=t[M],v(R)&&(R=R.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&M.indexOf(this.stringify.convertAttKey)===0)S=this.attribute(M.substr(this.stringify.convertAttKey.length),R);else if(!this.options.separateArrayItems&&Array.isArray(R)&&T(R))S=this.dummy();else if(L(R)&&T(R))S=this.element(M);else if(!this.options.keepNullNodes&&R==null)S=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(R))for(b=0,X=R.length;b<X;b++)P=R[b],i={},i[M]=P,S=this.element(i);else L(R)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&M.indexOf(this.stringify.convertTextKey)===0?S=this.element(R):(S=this.element(M),S.element(R)):S=this.element(M,R)}else!this.options.keepNullNodes&&A===null?S=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&t.indexOf(this.stringify.convertTextKey)===0?S=this.text(A):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&t.indexOf(this.stringify.convertCDataKey)===0?S=this.cdata(A):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&t.indexOf(this.stringify.convertCommentKey)===0?S=this.comment(A):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&t.indexOf(this.stringify.convertRawKey)===0?S=this.raw(A):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&t.indexOf(this.stringify.convertPIKey)===0?S=this.instruction(t.substr(this.stringify.convertPIKey.length),A):S=this.node(t,a,A);if(S==null)throw new Error("Could not create any elements with: "+t+". "+this.debugInfo());return S},r.prototype.insertBefore=function(t,a,A){var i,P,p,b,M;if(t?.type)return p=t,b=a,p.setParent(this),b?(P=children.indexOf(b),M=children.splice(P),children.push(p),Array.prototype.push.apply(children,M)):children.push(p),p;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return P=this.parent.children.indexOf(this),M=this.parent.children.splice(P),i=this.parent.element(t,a,A),Array.prototype.push.apply(this.parent.children,M),i},r.prototype.insertAfter=function(t,a,A){var i,P,p;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return P=this.parent.children.indexOf(this),p=this.parent.children.splice(P+1),i=this.parent.element(t,a,A),Array.prototype.push.apply(this.parent.children,p),i},r.prototype.remove=function(){var t,a;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat(a=[])),this.parent},r.prototype.node=function(t,a,A){var i,P;return t!=null&&(t=d(t)),a||(a={}),a=d(a),L(a)||(P=[a,A],A=P[0],a=P[1]),i=new l(this,t,a),A!=null&&i.text(A),this.children.push(i),i},r.prototype.text=function(t){var a;return L(t)&&this.element(t),a=new h(this,t),this.children.push(a),this},r.prototype.cdata=function(t){var a;return a=new E(this,t),this.children.push(a),this},r.prototype.comment=function(t){var a;return a=new O(this,t),this.children.push(a),this},r.prototype.commentBefore=function(t){var a,A,i;return A=this.parent.children.indexOf(this),i=this.parent.children.splice(A),a=this.parent.comment(t),Array.prototype.push.apply(this.parent.children,i),this},r.prototype.commentAfter=function(t){var a,A,i;return A=this.parent.children.indexOf(this),i=this.parent.children.splice(A+1),a=this.parent.comment(t),Array.prototype.push.apply(this.parent.children,i),this},r.prototype.raw=function(t){var a;return a=new m(this,t),this.children.push(a),this},r.prototype.dummy=function(){var t;return t=new o(this),t},r.prototype.instruction=function(t,a){var A,i,P,p,b;if(t!=null&&(t=d(t)),a!=null&&(a=d(a)),Array.isArray(t))for(p=0,b=t.length;p<b;p++)A=t[p],this.instruction(A);else if(L(t))for(A in t)u.call(t,A)&&(i=t[A],this.instruction(A,i));else v(a)&&(a=a.apply()),P=new N(this,t,a),this.children.push(P);return this},r.prototype.instructionBefore=function(t,a){var A,i,P;return i=this.parent.children.indexOf(this),P=this.parent.children.splice(i),A=this.parent.instruction(t,a),Array.prototype.push.apply(this.parent.children,P),this},r.prototype.instructionAfter=function(t,a){var A,i,P;return i=this.parent.children.indexOf(this),P=this.parent.children.splice(i+1),A=this.parent.instruction(t,a),Array.prototype.push.apply(this.parent.children,P),this},r.prototype.declaration=function(t,a,A){var i,P;return i=this.document(),P=new c(i,t,a,A),i.children.length===0?i.children.unshift(P):i.children[0].type===s.Declaration?i.children[0]=P:i.children.unshift(P),i.root()||i},r.prototype.dtd=function(t,a){var A,i,P,p,b,M,S,q,X,x;for(i=this.document(),P=new w(i,t,a),X=i.children,p=b=0,S=X.length;b<S;p=++b)if(A=X[p],A.type===s.DocType)return i.children[p]=P,P;for(x=i.children,p=M=0,q=x.length;M<q;p=++M)if(A=x[p],A.isRoot)return i.children.splice(p,0,P),P;return i.children.push(P),P},r.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},r.prototype.root=function(){var t;for(t=this;t;){if(t.type===s.Document)return t.rootObject;if(t.isRoot)return t;t=t.parent}},r.prototype.document=function(){var t;for(t=this;t;){if(t.type===s.Document)return t;t=t.parent}},r.prototype.end=function(t){return this.document().end(t)},r.prototype.prev=function(){var t;if(t=this.parent.children.indexOf(this),t<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]},r.prototype.next=function(){var t;if(t=this.parent.children.indexOf(this),t===-1||t===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]},r.prototype.importDocument=function(t){var a;return a=t.root().clone(),a.parent=this,a.isRoot=!1,this.children.push(a),this},r.prototype.debugInfo=function(t){var a,A;return t=t||this.name,t==null&&!((a=this.parent)!=null&&a.name)?"":t==null?"parent: <"+this.parent.name+">":(A=this.parent)!=null&&A.name?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">"},r.prototype.ele=function(t,a,A){return this.element(t,a,A)},r.prototype.nod=function(t,a,A){return this.node(t,a,A)},r.prototype.txt=function(t){return this.text(t)},r.prototype.dat=function(t){return this.cdata(t)},r.prototype.com=function(t){return this.comment(t)},r.prototype.ins=function(t,a){return this.instruction(t,a)},r.prototype.doc=function(){return this.document()},r.prototype.dec=function(t,a,A){return this.declaration(t,a,A)},r.prototype.e=function(t,a,A){return this.element(t,a,A)},r.prototype.n=function(t,a,A){return this.node(t,a,A)},r.prototype.t=function(t){return this.text(t)},r.prototype.d=function(t){return this.cdata(t)},r.prototype.c=function(t){return this.comment(t)},r.prototype.r=function(t){return this.raw(t)},r.prototype.i=function(t,a){return this.instruction(t,a)},r.prototype.u=function(){return this.up()},r.prototype.importXMLBuilder=function(t){return this.importDocument(t)},r.prototype.replaceChild=function(t,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.appendChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.hasChildNodes=function(){return this.children.length!==0},r.prototype.cloneNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isSupported=function(t,a){return!0},r.prototype.hasAttributes=function(){return this.attribs.length!==0},r.prototype.compareDocumentPosition=function(t){var a,A;return a=this,a===t?0:this.document()!==t.document()?(A=f.Disconnected|f.ImplementationSpecific,Math.random()<.5?A|=f.Preceding:A|=f.Following,A):a.isAncestor(t)?f.Contains|f.Preceding:a.isDescendant(t)?f.Contains|f.Following:a.isPreceding(t)?f.Preceding:f.Following},r.prototype.isSameNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.lookupPrefix=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isDefaultNamespace=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.lookupNamespaceURI=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isEqualNode=function(t){var a,A,i;if(t.nodeType!==this.nodeType||t.children.length!==this.children.length)return!1;for(a=A=0,i=this.children.length-1;0<=i?A<=i:A>=i;a=0<=i?++A:--A)if(!this.children[a].isEqualNode(t.children[a]))return!1;return!0},r.prototype.getFeature=function(t,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setUserData=function(t,a,A){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getUserData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.contains=function(t){return t?t===this||this.isDescendant(t):!1},r.prototype.isDescendant=function(t){var a,A,i,P,p;for(p=this.children,i=0,P=p.length;i<P;i++)if(a=p[i],t===a||(A=a.isDescendant(t),A))return!0;return!1},r.prototype.isAncestor=function(t){return t.isDescendant(this)},r.prototype.isPreceding=function(t){var a,A;return a=this.treePosition(t),A=this.treePosition(this),a===-1||A===-1?!1:a<A},r.prototype.isFollowing=function(t){var a,A;return a=this.treePosition(t),A=this.treePosition(this),a===-1||A===-1?!1:a>A},r.prototype.treePosition=function(t){var a,A;return A=0,a=!1,this.foreachTreeNode(this.document(),function(i){if(A++,!a&&i===t)return a=!0}),a?A:-1},r.prototype.foreachTreeNode=function(t,a){var A,i,P,p,b;for(t||(t=this.document()),p=t.children,i=0,P=p.length;i<P;i++){if(A=p[i],b=a(A))return b;if(b=this.foreachTreeNode(A,a),b)return b}},r}()}).call(Ue)});var Lt=F((Ve,ke)=>{(function(){var f,s=function(O,c){return function(){return O.apply(c,arguments)}},E={}.hasOwnProperty;ke.exports=f=function(){function O(c){this.assertLegalName=s(this.assertLegalName,this),this.assertLegalChar=s(this.assertLegalChar,this);var w,o,l;c||(c={}),this.options=c,this.options.version||(this.options.version="1.0"),o=c.stringify||{};for(w in o)E.call(o,w)&&(l=o[w],this[w]=l)}return O.prototype.name=function(c){return this.options.noValidation?c:this.assertLegalName(""+c||"")},O.prototype.text=function(c){return this.options.noValidation?c:this.assertLegalChar(this.textEscape(""+c||""))},O.prototype.cdata=function(c){return this.options.noValidation?c:(c=""+c||"",c=c.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(c))},O.prototype.comment=function(c){if(this.options.noValidation)return c;if(c=""+c||"",c.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+c);return this.assertLegalChar(c)},O.prototype.raw=function(c){return this.options.noValidation?c:""+c||""},O.prototype.attValue=function(c){return this.options.noValidation?c:this.assertLegalChar(this.attEscape(c=""+c||""))},O.prototype.insTarget=function(c){return this.options.noValidation?c:this.assertLegalChar(""+c||"")},O.prototype.insValue=function(c){if(this.options.noValidation)return c;if(c=""+c||"",c.match(/\?>/))throw new Error("Invalid processing instruction value: "+c);return this.assertLegalChar(c)},O.prototype.xmlVersion=function(c){if(this.options.noValidation)return c;if(c=""+c||"",!c.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+c);return c},O.prototype.xmlEncoding=function(c){if(this.options.noValidation)return c;if(c=""+c||"",!c.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+c);return this.assertLegalChar(c)},O.prototype.xmlStandalone=function(c){return this.options.noValidation?c:c?"yes":"no"},O.prototype.dtdPubID=function(c){return this.options.noValidation?c:this.assertLegalChar(""+c||"")},O.prototype.dtdSysID=function(c){return this.options.noValidation?c:this.assertLegalChar(""+c||"")},O.prototype.dtdElementValue=function(c){return this.options.noValidation?c:this.assertLegalChar(""+c||"")},O.prototype.dtdAttType=function(c){return this.options.noValidation?c:this.assertLegalChar(""+c||"")},O.prototype.dtdAttDefault=function(c){return this.options.noValidation?c:this.assertLegalChar(""+c||"")},O.prototype.dtdEntityValue=function(c){return this.options.noValidation?c:this.assertLegalChar(""+c||"")},O.prototype.dtdNData=function(c){return this.options.noValidation?c:this.assertLegalChar(""+c||"")},O.prototype.convertAttKey="@",O.prototype.convertPIKey="?",O.prototype.convertTextKey="#text",O.prototype.convertCDataKey="#cdata",O.prototype.convertCommentKey="#comment",O.prototype.convertRawKey="#raw",O.prototype.assertLegalChar=function(c){var w,o;if(this.options.noValidation)return c;if(w="",this.options.version==="1.0"){if(w=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=c.match(w))throw new Error("Invalid character in string: "+c+" at index "+o.index)}else if(this.options.version==="1.1"&&(w=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=c.match(w)))throw new Error("Invalid character in string: "+c+" at index "+o.index);return c},O.prototype.assertLegalName=function(c){var w;if(this.options.noValidation)return c;if(this.assertLegalChar(c),w=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!c.match(w))throw new Error("Invalid character in name");return c},O.prototype.textEscape=function(c){var w;return this.options.noValidation?c:(w=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,c.replace(w,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},O.prototype.attEscape=function(c){var w;return this.options.noValidation?c:(w=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,c.replace(w,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},O}()}).call(Ve)});var ot=F((Ge,We)=>{(function(){We.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Ge)});var Mt=F((Ye,ze)=>{(function(){var f,s,E,O,c,w,o,l,y,g,I,N,m,h,d,T,v,L={}.hasOwnProperty;v=H().assign,f=U(),y=ft(),g=gt(),E=lt(),O=ht(),N=ct(),h=wt(),d=Tt(),m=Dt(),I=_t(),c=pt(),w=yt(),o=dt(),l=mt(),s=ot(),ze.exports=T=function(){function C(u){var r,t,a;u||(u={}),this.options=u,t=u.writer||{};for(r in t)L.call(t,r)&&(a=t[r],this["_"+r]=this[r],this[r]=a)}return C.prototype.filterOptions=function(u){var r,t,a,A,i,P,p,b;return u||(u={}),u=v({},this.options,u),r={writer:this},r.pretty=u.pretty||!1,r.allowEmpty=u.allowEmpty||!1,r.indent=(t=u.indent)!=null?t:"  ",r.newline=(a=u.newline)!=null?a:`
`,r.offset=(A=u.offset)!=null?A:0,r.dontPrettyTextNodes=(i=(P=u.dontPrettyTextNodes)!=null?P:u.dontprettytextnodes)!=null?i:0,r.spaceBeforeSlash=(p=(b=u.spaceBeforeSlash)!=null?b:u.spacebeforeslash)!=null?p:"",r.spaceBeforeSlash===!0&&(r.spaceBeforeSlash=" "),r.suppressPrettyCount=0,r.user={},r.state=s.None,r},C.prototype.indent=function(u,r,t){var a;return!r.pretty||r.suppressPrettyCount?"":r.pretty&&(a=(t||0)+r.offset+1,a>0)?new Array(a).join(r.indent):""},C.prototype.endline=function(u,r,t){return!r.pretty||r.suppressPrettyCount?"":r.newline},C.prototype.attribute=function(u,r,t){var a;return this.openAttribute(u,r,t),a=" "+u.name+'="'+u.value+'"',this.closeAttribute(u,r,t),a},C.prototype.cdata=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t)+"<![CDATA[",r.state=s.InsideTag,a+=u.value,r.state=s.CloseTag,a+="]]>"+this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.comment=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t)+"<!-- ",r.state=s.InsideTag,a+=u.value,r.state=s.CloseTag,a+=" -->"+this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.declaration=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t)+"<?xml",r.state=s.InsideTag,a+=' version="'+u.version+'"',u.encoding!=null&&(a+=' encoding="'+u.encoding+'"'),u.standalone!=null&&(a+=' standalone="'+u.standalone+'"'),r.state=s.CloseTag,a+=r.spaceBeforeSlash+"?>",a+=this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.docType=function(u,r,t){var a,A,i,P,p;if(t||(t=0),this.openNode(u,r,t),r.state=s.OpenTag,P=this.indent(u,r,t),P+="<!DOCTYPE "+u.root().name,u.pubID&&u.sysID?P+=' PUBLIC "'+u.pubID+'" "'+u.sysID+'"':u.sysID&&(P+=' SYSTEM "'+u.sysID+'"'),u.children.length>0){for(P+=" [",P+=this.endline(u,r,t),r.state=s.InsideTag,p=u.children,A=0,i=p.length;A<i;A++)a=p[A],P+=this.writeChildNode(a,r,t+1);r.state=s.CloseTag,P+="]"}return r.state=s.CloseTag,P+=r.spaceBeforeSlash+">",P+=this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),P},C.prototype.element=function(u,r,t){var a,A,i,P,p,b,M,S,q,X,x,B,R,et;t||(t=0),X=!1,x="",this.openNode(u,r,t),r.state=s.OpenTag,x+=this.indent(u,r,t)+"<"+u.name,B=u.attribs;for(q in B)L.call(B,q)&&(a=B[q],x+=this.attribute(a,r,t));if(i=u.children.length,P=i===0?null:u.children[0],i===0||u.children.every(function(K){return(K.type===f.Text||K.type===f.Raw)&&K.value===""}))r.allowEmpty?(x+=">",r.state=s.CloseTag,x+="</"+u.name+">"+this.endline(u,r,t)):(r.state=s.CloseTag,x+=r.spaceBeforeSlash+"/>"+this.endline(u,r,t));else if(r.pretty&&i===1&&(P.type===f.Text||P.type===f.Raw)&&P.value!=null)x+=">",r.state=s.InsideTag,r.suppressPrettyCount++,X=!0,x+=this.writeChildNode(P,r,t+1),r.suppressPrettyCount--,X=!1,r.state=s.CloseTag,x+="</"+u.name+">"+this.endline(u,r,t);else{if(r.dontPrettyTextNodes){for(R=u.children,p=0,M=R.length;p<M;p++)if(A=R[p],(A.type===f.Text||A.type===f.Raw)&&A.value!=null){r.suppressPrettyCount++,X=!0;break}}for(x+=">"+this.endline(u,r,t),r.state=s.InsideTag,et=u.children,b=0,S=et.length;b<S;b++)A=et[b],x+=this.writeChildNode(A,r,t+1);r.state=s.CloseTag,x+=this.indent(u,r,t)+"</"+u.name+">",X&&r.suppressPrettyCount--,x+=this.endline(u,r,t),r.state=s.None}return this.closeNode(u,r,t),x},C.prototype.writeChildNode=function(u,r,t){switch(u.type){case f.CData:return this.cdata(u,r,t);case f.Comment:return this.comment(u,r,t);case f.Element:return this.element(u,r,t);case f.Raw:return this.raw(u,r,t);case f.Text:return this.text(u,r,t);case f.ProcessingInstruction:return this.processingInstruction(u,r,t);case f.Dummy:return"";case f.Declaration:return this.declaration(u,r,t);case f.DocType:return this.docType(u,r,t);case f.AttributeDeclaration:return this.dtdAttList(u,r,t);case f.ElementDeclaration:return this.dtdElement(u,r,t);case f.EntityDeclaration:return this.dtdEntity(u,r,t);case f.NotationDeclaration:return this.dtdNotation(u,r,t);default:throw new Error("Unknown XML node type: "+u.constructor.name)}},C.prototype.processingInstruction=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t)+"<?",r.state=s.InsideTag,a+=u.target,u.value&&(a+=" "+u.value),r.state=s.CloseTag,a+=r.spaceBeforeSlash+"?>",a+=this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.raw=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t),r.state=s.InsideTag,a+=u.value,r.state=s.CloseTag,a+=this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.text=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t),r.state=s.InsideTag,a+=u.value,r.state=s.CloseTag,a+=this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.dtdAttList=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t)+"<!ATTLIST",r.state=s.InsideTag,a+=" "+u.elementName+" "+u.attributeName+" "+u.attributeType,u.defaultValueType!=="#DEFAULT"&&(a+=" "+u.defaultValueType),u.defaultValue&&(a+=' "'+u.defaultValue+'"'),r.state=s.CloseTag,a+=r.spaceBeforeSlash+">"+this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.dtdElement=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t)+"<!ELEMENT",r.state=s.InsideTag,a+=" "+u.name+" "+u.value,r.state=s.CloseTag,a+=r.spaceBeforeSlash+">"+this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.dtdEntity=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t)+"<!ENTITY",r.state=s.InsideTag,u.pe&&(a+=" %"),a+=" "+u.name,u.value?a+=' "'+u.value+'"':(u.pubID&&u.sysID?a+=' PUBLIC "'+u.pubID+'" "'+u.sysID+'"':u.sysID&&(a+=' SYSTEM "'+u.sysID+'"'),u.nData&&(a+=" NDATA "+u.nData)),r.state=s.CloseTag,a+=r.spaceBeforeSlash+">"+this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.dtdNotation=function(u,r,t){var a;return this.openNode(u,r,t),r.state=s.OpenTag,a=this.indent(u,r,t)+"<!NOTATION",r.state=s.InsideTag,a+=" "+u.name,u.pubID&&u.sysID?a+=' PUBLIC "'+u.pubID+'" "'+u.sysID+'"':u.pubID?a+=' PUBLIC "'+u.pubID+'"':u.sysID&&(a+=' SYSTEM "'+u.sysID+'"'),r.state=s.CloseTag,a+=r.spaceBeforeSlash+">"+this.endline(u,r,t),r.state=s.None,this.closeNode(u,r,t),a},C.prototype.openNode=function(u,r,t){},C.prototype.closeNode=function(u,r,t){},C.prototype.openAttribute=function(u,r,t){},C.prototype.closeAttribute=function(u,r,t){},C}()}).call(Ye)});var Et=F((Ke,He)=>{(function(){var f,s,E=function(c,w){for(var o in w)O.call(w,o)&&(c[o]=w[o]);function l(){this.constructor=c}return l.prototype=w.prototype,c.prototype=new l,c.__super__=w.prototype,c},O={}.hasOwnProperty;s=Mt(),He.exports=f=function(c){E(w,c);function w(o){w.__super__.constructor.call(this,o)}return w.prototype.document=function(o,l){var y,g,I,N,m;for(l=this.filterOptions(l),N="",m=o.children,g=0,I=m.length;g<I;g++)y=m[g],N+=this.writeChildNode(y,l,0);return l.pretty&&N.slice(-l.newline.length)===l.newline&&(N=N.slice(0,-l.newline.length)),N},w}(s)}).call(Ke)});var vt=F((Qe,$e)=>{(function(){var f,s,E,O,c,w,o,l,y=function(I,N){for(var m in N)g.call(N,m)&&(I[m]=N[m]);function h(){this.constructor=I}return h.prototype=N.prototype,I.prototype=new h,I.__super__=N.prototype,I},g={}.hasOwnProperty;l=H().isPlainObject,E=At(),s=Zt(),c=Y(),f=U(),o=Lt(),w=Et(),$e.exports=O=function(I){y(N,I);function N(m){N.__super__.constructor.call(this,null),this.name="#document",this.type=f.Document,this.documentURI=null,this.domConfig=new s,m||(m={}),m.writer||(m.writer=new w),this.options=m,this.stringify=new o(m)}return Object.defineProperty(N.prototype,"implementation",{value:new E}),Object.defineProperty(N.prototype,"doctype",{get:function(){var m,h,d,T;for(T=this.children,h=0,d=T.length;h<d;h++)if(m=T[h],m.type===f.DocType)return m;return null}}),Object.defineProperty(N.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(N.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(N.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(N.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===f.Declaration?this.children[0].encoding:null}}),Object.defineProperty(N.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===f.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(N.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===f.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(N.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(N.prototype,"origin",{get:function(){return null}}),Object.defineProperty(N.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(N.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(N.prototype,"contentType",{get:function(){return null}}),N.prototype.end=function(m){var h;return h={},m?l(m)&&(h=m,m=this.options.writer):m=this.options.writer,m.document(this,m.filterOptions(h))},N.prototype.toString=function(m){return this.options.writer.document(this,this.options.writer.filterOptions(m))},N.prototype.createElement=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createTextNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createComment=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createCDATASection=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createProcessingInstruction=function(m,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createAttribute=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createEntityReference=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.importNode=function(m,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createElementNS=function(m,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createAttributeNS=function(m,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.getElementsByTagNameNS=function(m,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.getElementById=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.adoptNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.renameNode=function(m,h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.getElementsByClassName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createEvent=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createNodeIterator=function(m,h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},N.prototype.createTreeWalker=function(m,h,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},N}(c)}).call(Qe)});var tr=F((Je,Ze)=>{(function(){var f,s,E,O,c,w,o,l,y,g,I,N,m,h,d,T,v,L,C,u,r,t,a,A,i={}.hasOwnProperty;A=H(),t=A.isObject,r=A.isFunction,a=A.isPlainObject,u=A.getValue,f=U(),N=vt(),h=ct(),O=lt(),c=ht(),T=wt(),C=Tt(),d=Dt(),g=ft(),I=gt(),w=pt(),l=dt(),o=yt(),y=mt(),E=Pt(),L=Lt(),v=Et(),s=ot(),Ze.exports=m=function(){function P(p,b,M){var S;this.name="?xml",this.type=f.Document,p||(p={}),S={},p.writer?a(p.writer)&&(S=p.writer,p.writer=new v):p.writer=new v,this.options=p,this.writer=p.writer,this.writerOptions=this.writer.filterOptions(S),this.stringify=new L(p),this.onDataCallback=b||function(){},this.onEndCallback=M||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return P.prototype.createChildNode=function(p){var b,M,S,q,X,x,B,R;switch(p.type){case f.CData:this.cdata(p.value);break;case f.Comment:this.comment(p.value);break;case f.Element:S={},B=p.attribs;for(M in B)i.call(B,M)&&(b=B[M],S[M]=b.value);this.node(p.name,S);break;case f.Dummy:this.dummy();break;case f.Raw:this.raw(p.value);break;case f.Text:this.text(p.value);break;case f.ProcessingInstruction:this.instruction(p.target,p.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+p.constructor.name)}for(R=p.children,X=0,x=R.length;X<x;X++)q=R[X],this.createChildNode(q),q.type===f.Element&&this.up();return this},P.prototype.dummy=function(){return this},P.prototype.node=function(p,b,M){var S;if(p==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(p));return this.openCurrent(),p=u(p),b==null&&(b={}),b=u(b),t(b)||(S=[b,M],M=S[0],b=S[1]),this.currentNode=new h(this,p,b),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,M!=null&&this.text(M),this},P.prototype.element=function(p,b,M){var S,q,X,x,B,R;if(this.currentNode&&this.currentNode.type===f.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(p)||t(p)||r(p))for(x=this.options.noValidation,this.options.noValidation=!0,R=new N(this.options).element("TEMP_ROOT"),R.element(p),this.options.noValidation=x,B=R.children,q=0,X=B.length;q<X;q++)S=B[q],this.createChildNode(S),S.type===f.Element&&this.up();else this.node(p,b,M);return this},P.prototype.attribute=function(p,b){var M,S;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(p));if(p!=null&&(p=u(p)),t(p))for(M in p)i.call(p,M)&&(S=p[M],this.attribute(M,S));else r(b)&&(b=b.apply()),this.options.keepNullAttributes&&b==null?this.currentNode.attribs[p]=new E(this,p,""):b!=null&&(this.currentNode.attribs[p]=new E(this,p,b));return this},P.prototype.text=function(p){var b;return this.openCurrent(),b=new C(this,p),this.onData(this.writer.text(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.cdata=function(p){var b;return this.openCurrent(),b=new O(this,p),this.onData(this.writer.cdata(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.comment=function(p){var b;return this.openCurrent(),b=new c(this,p),this.onData(this.writer.comment(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.raw=function(p){var b;return this.openCurrent(),b=new T(this,p),this.onData(this.writer.raw(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.instruction=function(p,b){var M,S,q,X,x;if(this.openCurrent(),p!=null&&(p=u(p)),b!=null&&(b=u(b)),Array.isArray(p))for(M=0,X=p.length;M<X;M++)S=p[M],this.instruction(S);else if(t(p))for(S in p)i.call(p,S)&&(q=p[S],this.instruction(S,q));else r(b)&&(b=b.apply()),x=new d(this,p,b),this.onData(this.writer.processingInstruction(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},P.prototype.declaration=function(p,b,M){var S;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return S=new g(this,p,b,M),this.onData(this.writer.declaration(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.doctype=function(p,b,M){if(this.openCurrent(),p==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new I(this,b,M),this.currentNode.rootNodeName=p,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},P.prototype.dtdElement=function(p,b){var M;return this.openCurrent(),M=new o(this,p,b),this.onData(this.writer.dtdElement(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.attList=function(p,b,M,S,q){var X;return this.openCurrent(),X=new w(this,p,b,M,S,q),this.onData(this.writer.dtdAttList(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.entity=function(p,b){var M;return this.openCurrent(),M=new l(this,!1,p,b),this.onData(this.writer.dtdEntity(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.pEntity=function(p,b){var M;return this.openCurrent(),M=new l(this,!0,p,b),this.onData(this.writer.dtdEntity(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.notation=function(p,b){var M;return this.openCurrent(),M=new y(this,p,b),this.onData(this.writer.dtdNotation(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},P.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},P.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},P.prototype.openNode=function(p){var b,M,S,q;if(!p.isOpen){if(!this.root&&this.currentLevel===0&&p.type===f.Element&&(this.root=p),M="",p.type===f.Element){this.writerOptions.state=s.OpenTag,M=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<"+p.name,q=p.attribs;for(S in q)i.call(q,S)&&(b=q[S],M+=this.writer.attribute(b,this.writerOptions,this.currentLevel));M+=(p.children?">":"/>")+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=s.InsideTag}else this.writerOptions.state=s.OpenTag,M=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+p.rootNodeName,p.pubID&&p.sysID?M+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(M+=' SYSTEM "'+p.sysID+'"'),p.children?(M+=" [",this.writerOptions.state=s.InsideTag):(this.writerOptions.state=s.CloseTag,M+=">"),M+=this.writer.endline(p,this.writerOptions,this.currentLevel);return this.onData(M,this.currentLevel),p.isOpen=!0}},P.prototype.closeNode=function(p){var b;if(!p.isClosed)return b="",this.writerOptions.state=s.CloseTag,p.type===f.Element?b=this.writer.indent(p,this.writerOptions,this.currentLevel)+"</"+p.name+">"+this.writer.endline(p,this.writerOptions,this.currentLevel):b=this.writer.indent(p,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=s.None,this.onData(b,this.currentLevel),p.isClosed=!0},P.prototype.onData=function(p,b){return this.documentStarted=!0,this.onDataCallback(p,b+1)},P.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},P.prototype.debugInfo=function(p){return p==null?"":"node: <"+p+">"},P.prototype.ele=function(){return this.element.apply(this,arguments)},P.prototype.nod=function(p,b,M){return this.node(p,b,M)},P.prototype.txt=function(p){return this.text(p)},P.prototype.dat=function(p){return this.cdata(p)},P.prototype.com=function(p){return this.comment(p)},P.prototype.ins=function(p,b){return this.instruction(p,b)},P.prototype.dec=function(p,b,M){return this.declaration(p,b,M)},P.prototype.dtd=function(p,b,M){return this.doctype(p,b,M)},P.prototype.e=function(p,b,M){return this.element(p,b,M)},P.prototype.n=function(p,b,M){return this.node(p,b,M)},P.prototype.t=function(p){return this.text(p)},P.prototype.d=function(p){return this.cdata(p)},P.prototype.c=function(p){return this.comment(p)},P.prototype.r=function(p){return this.raw(p)},P.prototype.i=function(p,b){return this.instruction(p,b)},P.prototype.att=function(){return this.currentNode&&this.currentNode.type===f.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},P.prototype.a=function(){return this.currentNode&&this.currentNode.type===f.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},P.prototype.ent=function(p,b){return this.entity(p,b)},P.prototype.pent=function(p,b){return this.pEntity(p,b)},P.prototype.not=function(p,b){return this.notation(p,b)},P}()}).call(Je)});var ir=F((er,rr)=>{(function(){var f,s,E,O,c=function(o,l){for(var y in l)w.call(l,y)&&(o[y]=l[y]);function g(){this.constructor=o}return g.prototype=l.prototype,o.prototype=new g,o.__super__=l.prototype,o},w={}.hasOwnProperty;f=U(),O=Mt(),s=ot(),rr.exports=E=function(o){c(l,o);function l(y,g){this.stream=y,l.__super__.constructor.call(this,g)}return l.prototype.endline=function(y,g,I){return y.isLastRootNode&&g.state===s.CloseTag?"":l.__super__.endline.call(this,y,g,I)},l.prototype.document=function(y,g){var I,N,m,h,d,T,v,L,C;for(v=y.children,N=m=0,d=v.length;m<d;N=++m)I=v[N],I.isLastRootNode=N===y.children.length-1;for(g=this.filterOptions(g),L=y.children,C=[],h=0,T=L.length;h<T;h++)I=L[h],C.push(this.writeChildNode(I,g,0));return C},l.prototype.attribute=function(y,g,I){return this.stream.write(l.__super__.attribute.call(this,y,g,I))},l.prototype.cdata=function(y,g,I){return this.stream.write(l.__super__.cdata.call(this,y,g,I))},l.prototype.comment=function(y,g,I){return this.stream.write(l.__super__.comment.call(this,y,g,I))},l.prototype.declaration=function(y,g,I){return this.stream.write(l.__super__.declaration.call(this,y,g,I))},l.prototype.docType=function(y,g,I){var N,m,h,d;if(I||(I=0),this.openNode(y,g,I),g.state=s.OpenTag,this.stream.write(this.indent(y,g,I)),this.stream.write("<!DOCTYPE "+y.root().name),y.pubID&&y.sysID?this.stream.write(' PUBLIC "'+y.pubID+'" "'+y.sysID+'"'):y.sysID&&this.stream.write(' SYSTEM "'+y.sysID+'"'),y.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(y,g,I)),g.state=s.InsideTag,d=y.children,m=0,h=d.length;m<h;m++)N=d[m],this.writeChildNode(N,g,I+1);g.state=s.CloseTag,this.stream.write("]")}return g.state=s.CloseTag,this.stream.write(g.spaceBeforeSlash+">"),this.stream.write(this.endline(y,g,I)),g.state=s.None,this.closeNode(y,g,I)},l.prototype.element=function(y,g,I){var N,m,h,d,T,v,L,C,u,r;I||(I=0),this.openNode(y,g,I),g.state=s.OpenTag,this.stream.write(this.indent(y,g,I)+"<"+y.name),u=y.attribs;for(L in u)w.call(u,L)&&(N=u[L],this.attribute(N,g,I));if(h=y.children.length,d=h===0?null:y.children[0],h===0||y.children.every(function(t){return(t.type===f.Text||t.type===f.Raw)&&t.value===""}))g.allowEmpty?(this.stream.write(">"),g.state=s.CloseTag,this.stream.write("</"+y.name+">")):(g.state=s.CloseTag,this.stream.write(g.spaceBeforeSlash+"/>"));else if(g.pretty&&h===1&&(d.type===f.Text||d.type===f.Raw)&&d.value!=null)this.stream.write(">"),g.state=s.InsideTag,g.suppressPrettyCount++,C=!0,this.writeChildNode(d,g,I+1),g.suppressPrettyCount--,C=!1,g.state=s.CloseTag,this.stream.write("</"+y.name+">");else{for(this.stream.write(">"+this.endline(y,g,I)),g.state=s.InsideTag,r=y.children,T=0,v=r.length;T<v;T++)m=r[T],this.writeChildNode(m,g,I+1);g.state=s.CloseTag,this.stream.write(this.indent(y,g,I)+"</"+y.name+">")}return this.stream.write(this.endline(y,g,I)),g.state=s.None,this.closeNode(y,g,I)},l.prototype.processingInstruction=function(y,g,I){return this.stream.write(l.__super__.processingInstruction.call(this,y,g,I))},l.prototype.raw=function(y,g,I){return this.stream.write(l.__super__.raw.call(this,y,g,I))},l.prototype.text=function(y,g,I){return this.stream.write(l.__super__.text.call(this,y,g,I))},l.prototype.dtdAttList=function(y,g,I){return this.stream.write(l.__super__.dtdAttList.call(this,y,g,I))},l.prototype.dtdElement=function(y,g,I){return this.stream.write(l.__super__.dtdElement.call(this,y,g,I))},l.prototype.dtdEntity=function(y,g,I){return this.stream.write(l.__super__.dtdEntity.call(this,y,g,I))},l.prototype.dtdNotation=function(y,g,I){return this.stream.write(l.__super__.dtdNotation.call(this,y,g,I))},l}(O)}).call(er)});var or=F((nr,tt)=>{(function(){var f,s,E,O,c,w,o,l,y,g;g=H(),l=g.assign,y=g.isFunction,E=At(),O=vt(),c=tr(),o=Et(),w=ir(),f=U(),s=ot(),tt.exports.create=function(I,N,m,h){var d,T;if(I==null)throw new Error("Root element needs a name.");return h=l({},N,m,h),d=new O(h),T=d.element(I),h.headless||(d.declaration(h),(h.pubID!=null||h.sysID!=null)&&d.dtd(h)),T},tt.exports.begin=function(I,N,m){var h;return y(I)&&(h=[I,N],N=h[0],m=h[1],I={}),N?new c(I,N,m):new O(I)},tt.exports.stringWriter=function(I){return new o(I)},tt.exports.streamWriter=function(I,N){return new w(I,N)},tt.exports.implementation=new E,tt.exports.nodeType=f,tt.exports.writerState=s}).call(nr)});var sr=F(St=>{(function(){"use strict";var f,s,E,O,c,w={}.hasOwnProperty;f=or(),s=at().defaults,O=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},c=function(o){return"<![CDATA["+E(o)+"]]>"},E=function(o){return o.replace("]]>","]]]]><![CDATA[>")},St.Builder=function(){function o(l){var y,g,I;this.options={},g=s["0.2"];for(y in g)w.call(g,y)&&(I=g[y],this.options[y]=I);for(y in l)w.call(l,y)&&(I=l[y],this.options[y]=I)}return o.prototype.buildObject=function(l){var y,g,I,N,m;return y=this.options.attrkey,g=this.options.charkey,Object.keys(l).length===1&&this.options.rootName===s["0.2"].rootName?(m=Object.keys(l)[0],l=l[m]):m=this.options.rootName,I=function(h){return function(d,T){var v,L,C,u,r,t;if(typeof T!="object")h.options.cdata&&O(T)?d.raw(c(T)):d.txt(T);else if(Array.isArray(T)){for(u in T)if(w.call(T,u)){L=T[u];for(r in L)C=L[r],d=I(d.ele(r),C).up()}}else for(r in T)if(w.call(T,r))if(L=T[r],r===y){if(typeof L=="object")for(v in L)t=L[v],d=d.att(v,t)}else if(r===g)h.options.cdata&&O(L)?d=d.raw(c(L)):d=d.txt(L);else if(Array.isArray(L))for(u in L)w.call(L,u)&&(C=L[u],typeof C=="string"?h.options.cdata&&O(C)?d=d.ele(r).raw(c(C)).up():d=d.ele(r,C).up():d=I(d.ele(r),C).up());else typeof L=="object"?d=I(d.ele(r),L).up():typeof L=="string"&&h.options.cdata&&O(L)?d=d.ele(r).raw(c(L)).up():(L==null&&(L=""),d=d.ele(r,L.toString()).up());return d}}(this),N=f.create(m,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),I(N,l).end(this.options.renderOpts)},o}()}).call(St)});var ar=F(Nt=>{(function(f){f.parser=function(n,e){return new E(n,e)},f.SAXParser=E,f.SAXStream=g,f.createStream=y,f.MAX_BUFFER_LENGTH=64*1024;var s=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];f.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function E(n,e){if(!(this instanceof E))return new E(n,e);var _=this;c(_),_.q=_.c="",_.bufferCheckPosition=f.MAX_BUFFER_LENGTH,_.opt=e||{},_.opt.lowercase=_.opt.lowercase||_.opt.lowercasetags,_.looseCase=_.opt.lowercase?"toLowerCase":"toUpperCase",_.tags=[],_.closed=_.closedRoot=_.sawRoot=!1,_.tag=_.error=null,_.strict=!!n,_.noscript=!!(n||_.opt.noscript),_.state=i.BEGIN,_.strictEntities=_.opt.strictEntities,_.ENTITIES=_.strictEntities?Object.create(f.XML_ENTITIES):Object.create(f.ENTITIES),_.attribList=[],_.opt.xmlns&&(_.ns=Object.create(d)),_.trackPosition=_.opt.position!==!1,_.trackPosition&&(_.position=_.line=_.column=0),p(_,"onready")}Object.create||(Object.create=function(n){function e(){}e.prototype=n;var _=new e;return _}),Object.keys||(Object.keys=function(n){var e=[];for(var _ in n)n.hasOwnProperty(_)&&e.push(_);return e});function O(n){for(var e=Math.max(f.MAX_BUFFER_LENGTH,10),_=0,D=0,j=s.length;D<j;D++){var V=n[s[D]].length;if(V>e)switch(s[D]){case"textNode":M(n);break;case"cdata":b(n,"oncdata",n.cdata),n.cdata="";break;case"script":b(n,"onscript",n.script),n.script="";break;default:q(n,"Max buffer length exceeded: "+s[D])}_=Math.max(_,V)}var k=f.MAX_BUFFER_LENGTH-_;n.bufferCheckPosition=k+n.position}function c(n){for(var e=0,_=s.length;e<_;e++)n[s[e]]=""}function w(n){M(n),n.cdata!==""&&(b(n,"oncdata",n.cdata),n.cdata=""),n.script!==""&&(b(n,"onscript",n.script),n.script="")}E.prototype={end:function(){X(this)},write:mr,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){w(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var l=f.EVENTS.filter(function(n){return n!=="error"&&n!=="end"});function y(n,e){return new g(n,e)}function g(n,e){if(!(this instanceof g))return new g(n,e);o.apply(this),this._parser=new E(n,e),this.writable=!0,this.readable=!0;var _=this;this._parser.onend=function(){_.emit("end")},this._parser.onerror=function(D){_.emit("error",D),_._parser.error=null},this._decoder=null,l.forEach(function(D){Object.defineProperty(_,"on"+D,{get:function(){return _._parser["on"+D]},set:function(j){if(!j)return _.removeAllListeners(D),_._parser["on"+D]=j,j;_.on(D,j)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(o.prototype,{constructor:{value:g}}),g.prototype.write=function(n){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(n)){if(!this._decoder){var e=require("string_decoder").StringDecoder;this._decoder=new e("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},g.prototype.end=function(n){return n&&n.length&&this.write(n),this._parser.end(),!0},g.prototype.on=function(n,e){var _=this;return!_._parser["on"+n]&&l.indexOf(n)!==-1&&(_._parser["on"+n]=function(){var D=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);D.splice(0,0,n),_.emit.apply(_,D)}),o.prototype.on.call(_,n,e)};var I="[CDATA[",N="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",d={xml:m,xmlns:h},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,L=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function u(n){return n===" "||n===`
`||n==="\r"||n==="	"}function r(n){return n==='"'||n==="'"}function t(n){return n===">"||u(n)}function a(n,e){return n.test(e)}function A(n,e){return!a(n,e)}var i=0;f.STATE={BEGIN:i++,BEGIN_WHITESPACE:i++,TEXT:i++,TEXT_ENTITY:i++,OPEN_WAKA:i++,SGML_DECL:i++,SGML_DECL_QUOTED:i++,DOCTYPE:i++,DOCTYPE_QUOTED:i++,DOCTYPE_DTD:i++,DOCTYPE_DTD_QUOTED:i++,COMMENT_STARTING:i++,COMMENT:i++,COMMENT_ENDING:i++,COMMENT_ENDED:i++,CDATA:i++,CDATA_ENDING:i++,CDATA_ENDING_2:i++,PROC_INST:i++,PROC_INST_BODY:i++,PROC_INST_ENDING:i++,OPEN_TAG:i++,OPEN_TAG_SLASH:i++,ATTRIB:i++,ATTRIB_NAME:i++,ATTRIB_NAME_SAW_WHITE:i++,ATTRIB_VALUE:i++,ATTRIB_VALUE_QUOTED:i++,ATTRIB_VALUE_CLOSED:i++,ATTRIB_VALUE_UNQUOTED:i++,ATTRIB_VALUE_ENTITY_Q:i++,ATTRIB_VALUE_ENTITY_U:i++,CLOSE_TAG:i++,CLOSE_TAG_SAW_WHITE:i++,SCRIPT:i++,SCRIPT_ENDING:i++},f.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},f.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(f.ENTITIES).forEach(function(n){var e=f.ENTITIES[n],_=typeof e=="number"?String.fromCharCode(e):e;f.ENTITIES[n]=_});for(var P in f.STATE)f.STATE[f.STATE[P]]=P;i=f.STATE;function p(n,e,_){n[e]&&n[e](_)}function b(n,e,_){n.textNode&&M(n),p(n,e,_)}function M(n){n.textNode=S(n.opt,n.textNode),n.textNode&&p(n,"ontext",n.textNode),n.textNode=""}function S(n,e){return n.trim&&(e=e.trim()),n.normalize&&(e=e.replace(/\s+/g," ")),e}function q(n,e){return M(n),n.trackPosition&&(e+=`
Line: `+n.line+`
Column: `+n.column+`
Char: `+n.c),e=new Error(e),n.error=e,p(n,"onerror",e),n}function X(n){return n.sawRoot&&!n.closedRoot&&x(n,"Unclosed root tag"),n.state!==i.BEGIN&&n.state!==i.BEGIN_WHITESPACE&&n.state!==i.TEXT&&q(n,"Unexpected end"),M(n),n.c="",n.closed=!0,p(n,"onend"),E.call(n,n.strict,n.opt),n}function x(n,e){if(typeof n!="object"||!(n instanceof E))throw new Error("bad call to strictFail");n.strict&&q(n,e)}function B(n){n.strict||(n.tagName=n.tagName[n.looseCase]());var e=n.tags[n.tags.length-1]||n,_=n.tag={name:n.tagName,attributes:{}};n.opt.xmlns&&(_.ns=e.ns),n.attribList.length=0,b(n,"onopentagstart",_)}function R(n,e){var _=n.indexOf(":"),D=_<0?["",n]:n.split(":"),j=D[0],V=D[1];return e&&n==="xmlns"&&(j="xmlns",V=""),{prefix:j,local:V}}function et(n){if(n.strict||(n.attribName=n.attribName[n.looseCase]()),n.attribList.indexOf(n.attribName)!==-1||n.tag.attributes.hasOwnProperty(n.attribName)){n.attribName=n.attribValue="";return}if(n.opt.xmlns){var e=R(n.attribName,!0),_=e.prefix,D=e.local;if(_==="xmlns")if(D==="xml"&&n.attribValue!==m)x(n,"xml: prefix must be bound to "+m+`
Actual: `+n.attribValue);else if(D==="xmlns"&&n.attribValue!==h)x(n,"xmlns: prefix must be bound to "+h+`
Actual: `+n.attribValue);else{var j=n.tag,V=n.tags[n.tags.length-1]||n;j.ns===V.ns&&(j.ns=Object.create(V.ns)),j.ns[D]=n.attribValue}n.attribList.push([n.attribName,n.attribValue])}else n.tag.attributes[n.attribName]=n.attribValue,b(n,"onattribute",{name:n.attribName,value:n.attribValue});n.attribName=n.attribValue=""}function K(n,e){if(n.opt.xmlns){var _=n.tag,D=R(n.tagName);_.prefix=D.prefix,_.local=D.local,_.uri=_.ns[D.prefix]||"",_.prefix&&!_.uri&&(x(n,"Unbound namespace prefix: "+JSON.stringify(n.tagName)),_.uri=D.prefix);var j=n.tags[n.tags.length-1]||n;_.ns&&j.ns!==_.ns&&Object.keys(_.ns).forEach(function(Ut){b(n,"onopennamespace",{prefix:Ut,uri:_.ns[Ut]})});for(var V=0,k=n.attribList.length;V<k;V++){var W=n.attribList[V],z=W[0],it=W[1],G=R(z,!0),Q=G.prefix,gr=G.local,jt=Q===""?"":_.ns[Q]||"",Ot={name:z,value:it,prefix:Q,local:gr,uri:jt};Q&&Q!=="xmlns"&&!jt&&(x(n,"Unbound namespace prefix: "+JSON.stringify(Q)),Ot.uri=Q),n.tag.attributes[z]=Ot,b(n,"onattribute",Ot)}n.attribList.length=0}n.tag.isSelfClosing=!!e,n.sawRoot=!0,n.tags.push(n.tag),b(n,"onopentag",n.tag),e||(!n.noscript&&n.tagName.toLowerCase()==="script"?n.state=i.SCRIPT:n.state=i.TEXT,n.tag=null,n.tagName=""),n.attribName=n.attribValue="",n.attribList.length=0}function It(n){if(!n.tagName){x(n,"Weird empty close tag."),n.textNode+="</>",n.state=i.TEXT;return}if(n.script){if(n.tagName!=="script"){n.script+="</"+n.tagName+">",n.tagName="",n.state=i.SCRIPT;return}b(n,"onscript",n.script),n.script=""}var e=n.tags.length,_=n.tagName;n.strict||(_=_[n.looseCase]());for(var D=_;e--;){var j=n.tags[e];if(j.name!==D)x(n,"Unexpected close tag");else break}if(e<0){x(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",n.state=i.TEXT;return}n.tagName=_;for(var V=n.tags.length;V-- >e;){var k=n.tag=n.tags.pop();n.tagName=n.tag.name,b(n,"onclosetag",n.tagName);var W={};for(var z in k.ns)W[z]=k.ns[z];var it=n.tags[n.tags.length-1]||n;n.opt.xmlns&&k.ns!==it.ns&&Object.keys(k.ns).forEach(function(G){var Q=k.ns[G];b(n,"onclosenamespace",{prefix:G,uri:Q})})}e===0&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=i.TEXT}function qt(n){var e=n.entity,_=e.toLowerCase(),D,j="";return n.ENTITIES[e]?n.ENTITIES[e]:n.ENTITIES[_]?n.ENTITIES[_]:(e=_,e.charAt(0)==="#"&&(e.charAt(1)==="x"?(e=e.slice(2),D=parseInt(e,16),j=D.toString(16)):(e=e.slice(1),D=parseInt(e,10),j=D.toString(10))),e=e.replace(/^0+/,""),isNaN(D)||j.toLowerCase()!==e?(x(n,"Invalid character entity"),"&"+n.entity+";"):String.fromCodePoint(D))}function Xt(n,e){e==="<"?(n.state=i.OPEN_WAKA,n.startTagPosition=n.position):u(e)||(x(n,"Non-whitespace before first tag."),n.textNode=e,n.state=i.TEXT)}function Rt(n,e){var _="";return e<n.length&&(_=n.charAt(e)),_}function mr(n){var e=this;if(this.error)throw this.error;if(e.closed)return q(e,"Cannot write after close. Assign an onready handler.");if(n===null)return X(e);typeof n=="object"&&(n=n.toString());for(var _=0,D="";D=Rt(n,_++),e.c=D,!!D;)switch(e.trackPosition&&(e.position++,D===`
`?(e.line++,e.column=0):e.column++),e.state){case i.BEGIN:if(e.state=i.BEGIN_WHITESPACE,D==="\uFEFF")continue;Xt(e,D);continue;case i.BEGIN_WHITESPACE:Xt(e,D);continue;case i.TEXT:if(e.sawRoot&&!e.closedRoot){for(var j=_-1;D&&D!=="<"&&D!=="&";)D=Rt(n,_++),D&&e.trackPosition&&(e.position++,D===`
`?(e.line++,e.column=0):e.column++);e.textNode+=n.substring(j,_-1)}D==="<"&&!(e.sawRoot&&e.closedRoot&&!e.strict)?(e.state=i.OPEN_WAKA,e.startTagPosition=e.position):(!u(D)&&(!e.sawRoot||e.closedRoot)&&x(e,"Text data outside of root node."),D==="&"?e.state=i.TEXT_ENTITY:e.textNode+=D);continue;case i.SCRIPT:D==="<"?e.state=i.SCRIPT_ENDING:e.script+=D;continue;case i.SCRIPT_ENDING:D==="/"?e.state=i.CLOSE_TAG:(e.script+="<"+D,e.state=i.SCRIPT);continue;case i.OPEN_WAKA:if(D==="!")e.state=i.SGML_DECL,e.sgmlDecl="";else if(!u(D))if(a(T,D))e.state=i.OPEN_TAG,e.tagName=D;else if(D==="/")e.state=i.CLOSE_TAG,e.tagName="";else if(D==="?")e.state=i.PROC_INST,e.procInstName=e.procInstBody="";else{if(x(e,"Unencoded <"),e.startTagPosition+1<e.position){var V=e.position-e.startTagPosition;D=new Array(V).join(" ")+D}e.textNode+="<"+D,e.state=i.TEXT}continue;case i.SGML_DECL:(e.sgmlDecl+D).toUpperCase()===I?(b(e,"onopencdata"),e.state=i.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+D==="--"?(e.state=i.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+D).toUpperCase()===N?(e.state=i.DOCTYPE,(e.doctype||e.sawRoot)&&x(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):D===">"?(b(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=i.TEXT):(r(D)&&(e.state=i.SGML_DECL_QUOTED),e.sgmlDecl+=D);continue;case i.SGML_DECL_QUOTED:D===e.q&&(e.state=i.SGML_DECL,e.q=""),e.sgmlDecl+=D;continue;case i.DOCTYPE:D===">"?(e.state=i.TEXT,b(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=D,D==="["?e.state=i.DOCTYPE_DTD:r(D)&&(e.state=i.DOCTYPE_QUOTED,e.q=D));continue;case i.DOCTYPE_QUOTED:e.doctype+=D,D===e.q&&(e.q="",e.state=i.DOCTYPE);continue;case i.DOCTYPE_DTD:e.doctype+=D,D==="]"?e.state=i.DOCTYPE:r(D)&&(e.state=i.DOCTYPE_DTD_QUOTED,e.q=D);continue;case i.DOCTYPE_DTD_QUOTED:e.doctype+=D,D===e.q&&(e.state=i.DOCTYPE_DTD,e.q="");continue;case i.COMMENT:D==="-"?e.state=i.COMMENT_ENDING:e.comment+=D;continue;case i.COMMENT_ENDING:D==="-"?(e.state=i.COMMENT_ENDED,e.comment=S(e.opt,e.comment),e.comment&&b(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+D,e.state=i.COMMENT);continue;case i.COMMENT_ENDED:D!==">"?(x(e,"Malformed comment"),e.comment+="--"+D,e.state=i.COMMENT):e.state=i.TEXT;continue;case i.CDATA:D==="]"?e.state=i.CDATA_ENDING:e.cdata+=D;continue;case i.CDATA_ENDING:D==="]"?e.state=i.CDATA_ENDING_2:(e.cdata+="]"+D,e.state=i.CDATA);continue;case i.CDATA_ENDING_2:D===">"?(e.cdata&&b(e,"oncdata",e.cdata),b(e,"onclosecdata"),e.cdata="",e.state=i.TEXT):D==="]"?e.cdata+="]":(e.cdata+="]]"+D,e.state=i.CDATA);continue;case i.PROC_INST:D==="?"?e.state=i.PROC_INST_ENDING:u(D)?e.state=i.PROC_INST_BODY:e.procInstName+=D;continue;case i.PROC_INST_BODY:if(!e.procInstBody&&u(D))continue;D==="?"?e.state=i.PROC_INST_ENDING:e.procInstBody+=D;continue;case i.PROC_INST_ENDING:D===">"?(b(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=i.TEXT):(e.procInstBody+="?"+D,e.state=i.PROC_INST_BODY);continue;case i.OPEN_TAG:a(v,D)?e.tagName+=D:(B(e),D===">"?K(e):D==="/"?e.state=i.OPEN_TAG_SLASH:(u(D)||x(e,"Invalid character in tag name"),e.state=i.ATTRIB));continue;case i.OPEN_TAG_SLASH:D===">"?(K(e,!0),It(e)):(x(e,"Forward-slash in opening tag not followed by >"),e.state=i.ATTRIB);continue;case i.ATTRIB:if(u(D))continue;D===">"?K(e):D==="/"?e.state=i.OPEN_TAG_SLASH:a(T,D)?(e.attribName=D,e.attribValue="",e.state=i.ATTRIB_NAME):x(e,"Invalid attribute name");continue;case i.ATTRIB_NAME:D==="="?e.state=i.ATTRIB_VALUE:D===">"?(x(e,"Attribute without value"),e.attribValue=e.attribName,et(e),K(e)):u(D)?e.state=i.ATTRIB_NAME_SAW_WHITE:a(v,D)?e.attribName+=D:x(e,"Invalid attribute name");continue;case i.ATTRIB_NAME_SAW_WHITE:if(D==="=")e.state=i.ATTRIB_VALUE;else{if(u(D))continue;x(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",b(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",D===">"?K(e):a(T,D)?(e.attribName=D,e.state=i.ATTRIB_NAME):(x(e,"Invalid attribute name"),e.state=i.ATTRIB)}continue;case i.ATTRIB_VALUE:if(u(D))continue;r(D)?(e.q=D,e.state=i.ATTRIB_VALUE_QUOTED):(x(e,"Unquoted attribute value"),e.state=i.ATTRIB_VALUE_UNQUOTED,e.attribValue=D);continue;case i.ATTRIB_VALUE_QUOTED:if(D!==e.q){D==="&"?e.state=i.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=D;continue}et(e),e.q="",e.state=i.ATTRIB_VALUE_CLOSED;continue;case i.ATTRIB_VALUE_CLOSED:u(D)?e.state=i.ATTRIB:D===">"?K(e):D==="/"?e.state=i.OPEN_TAG_SLASH:a(T,D)?(x(e,"No whitespace between attributes"),e.attribName=D,e.attribValue="",e.state=i.ATTRIB_NAME):x(e,"Invalid attribute name");continue;case i.ATTRIB_VALUE_UNQUOTED:if(!t(D)){D==="&"?e.state=i.ATTRIB_VALUE_ENTITY_U:e.attribValue+=D;continue}et(e),D===">"?K(e):e.state=i.ATTRIB;continue;case i.CLOSE_TAG:if(e.tagName)D===">"?It(e):a(v,D)?e.tagName+=D:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=i.SCRIPT):(u(D)||x(e,"Invalid tagname in closing tag"),e.state=i.CLOSE_TAG_SAW_WHITE);else{if(u(D))continue;A(T,D)?e.script?(e.script+="</"+D,e.state=i.SCRIPT):x(e,"Invalid tagname in closing tag."):e.tagName=D}continue;case i.CLOSE_TAG_SAW_WHITE:if(u(D))continue;D===">"?It(e):x(e,"Invalid characters in closing tag");continue;case i.TEXT_ENTITY:case i.ATTRIB_VALUE_ENTITY_Q:case i.ATTRIB_VALUE_ENTITY_U:var k,W;switch(e.state){case i.TEXT_ENTITY:k=i.TEXT,W="textNode";break;case i.ATTRIB_VALUE_ENTITY_Q:k=i.ATTRIB_VALUE_QUOTED,W="attribValue";break;case i.ATTRIB_VALUE_ENTITY_U:k=i.ATTRIB_VALUE_UNQUOTED,W="attribValue";break}if(D===";")if(e.opt.unparsedEntities){var z=qt(e);e.entity="",e.state=k,e.write(z)}else e[W]+=qt(e),e.entity="",e.state=k;else a(e.entity.length?C:L,D)?e.entity+=D:(x(e,"Invalid character in entity name"),e[W]+="&"+e.entity+D,e.entity="",e.state=k);continue;default:throw new Error(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&O(e),e}String.fromCodePoint||function(){var n=String.fromCharCode,e=Math.floor,_=function(){var D=16384,j=[],V,k,W=-1,z=arguments.length;if(!z)return"";for(var it="";++W<z;){var G=Number(arguments[W]);if(!isFinite(G)||G<0||G>1114111||e(G)!==G)throw RangeError("Invalid code point: "+G);G<=65535?j.push(G):(G-=65536,V=(G>>10)+55296,k=G%1024+56320,j.push(V,k)),(W+1===z||j.length>D)&&(it+=n.apply(null,j),j.length=0)}return it};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:_,configurable:!0,writable:!0}):String.fromCodePoint=_}()})(typeof Nt>"u"?Nt.sax={}:Nt)});var ur=F(xt=>{(function(){"use strict";xt.stripBOM=function(f){return f[0]==="\uFEFF"?f.substring(1):f}}).call(xt)});var Ft=F(rt=>{(function(){"use strict";var f;f=new RegExp(/(?!xmlns)^.*:/),rt.normalize=function(s){return s.toLowerCase()},rt.firstCharLowerCase=function(s){return s.charAt(0).toLowerCase()+s.slice(1)},rt.stripPrefix=function(s){return s.replace(f,"")},rt.parseNumbers=function(s){return isNaN(s)||(s=s%1===0?parseInt(s,10):parseFloat(s)),s},rt.parseBooleans=function(s){return/^(?:true|false)$/i.test(s)&&(s=s.toLowerCase()==="true"),s}}).call(rt)});var cr=F($=>{(function(){"use strict";var f,s,E,O,c,w,o,l,y,g=function(m,h){return function(){return m.apply(h,arguments)}},I=function(m,h){for(var d in h)N.call(h,d)&&(m[d]=h[d]);function T(){this.constructor=m}return T.prototype=h.prototype,m.prototype=new T,m.__super__=h.prototype,m},N={}.hasOwnProperty;l=ar(),O=require("events"),f=ur(),o=Ft(),y=require("timers").setImmediate,s=at().defaults,c=function(m){return typeof m=="object"&&m!=null&&Object.keys(m).length===0},w=function(m,h,d){var T,v,L;for(T=0,v=m.length;T<v;T++)L=m[T],h=L(h,d);return h},E=function(m,h,d){var T;return T=Object.create(null),T.value=d,T.writable=!0,T.enumerable=!0,T.configurable=!0,Object.defineProperty(m,h,T)},$.Parser=function(m){I(h,m);function h(d){this.parseStringPromise=g(this.parseStringPromise,this),this.parseString=g(this.parseString,this),this.reset=g(this.reset,this),this.assignOrPush=g(this.assignOrPush,this),this.processAsync=g(this.processAsync,this);var T,v,L;if(!(this instanceof $.Parser))return new $.Parser(d);this.options={},v=s["0.2"];for(T in v)N.call(v,T)&&(L=v[T],this.options[T]=L);for(T in d)N.call(d,T)&&(L=d[T],this.options[T]=L);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return h.prototype.processAsync=function(){var d,T;try{return this.remaining.length<=this.options.chunkSize?(d=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(d),this.saxParser.close()):(d=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(d),y(this.processAsync))}catch(v){if(T=v,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(T)}},h.prototype.assignOrPush=function(d,T,v){return T in d?(d[T]instanceof Array||E(d,T,[d[T]]),d[T].push(v)):this.options.explicitArray?E(d,T,[v]):E(d,T,v)},h.prototype.reset=function(){var d,T,v,L;return this.removeAllListeners(),this.saxParser=l.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(C){return function(u){if(C.saxParser.resume(),!C.saxParser.errThrown)return C.saxParser.errThrown=!0,C.emit("error",u)}}(this),this.saxParser.onend=function(C){return function(){if(!C.saxParser.ended)return C.saxParser.ended=!0,C.emit("end",C.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,L=[],d=this.options.attrkey,T=this.options.charkey,this.saxParser.onopentag=function(C){return function(u){var r,t,a,A,i;if(a={},a[T]="",!C.options.ignoreAttrs){i=u.attributes;for(r in i)N.call(i,r)&&(!(d in a)&&!C.options.mergeAttrs&&(a[d]={}),t=C.options.attrValueProcessors?w(C.options.attrValueProcessors,u.attributes[r],r):u.attributes[r],A=C.options.attrNameProcessors?w(C.options.attrNameProcessors,r):r,C.options.mergeAttrs?C.assignOrPush(a,A,t):E(a[d],A,t))}return a["#name"]=C.options.tagNameProcessors?w(C.options.tagNameProcessors,u.name):u.name,C.options.xmlns&&(a[C.options.xmlnskey]={uri:u.uri,local:u.local}),L.push(a)}}(this),this.saxParser.onclosetag=function(C){return function(){var u,r,t,a,A,i,P,p,b,M;if(i=L.pop(),A=i["#name"],(!C.options.explicitChildren||!C.options.preserveChildrenOrder)&&delete i["#name"],i.cdata===!0&&(u=i.cdata,delete i.cdata),b=L[L.length-1],i[T].match(/^\s*$/)&&!u?(r=i[T],delete i[T]):(C.options.trim&&(i[T]=i[T].trim()),C.options.normalize&&(i[T]=i[T].replace(/\s{2,}/g," ").trim()),i[T]=C.options.valueProcessors?w(C.options.valueProcessors,i[T],A):i[T],Object.keys(i).length===1&&T in i&&!C.EXPLICIT_CHARKEY&&(i=i[T])),c(i)&&(typeof C.options.emptyTag=="function"?i=C.options.emptyTag():i=C.options.emptyTag!==""?C.options.emptyTag:r),C.options.validator!=null&&(M="/"+function(){var S,q,X;for(X=[],S=0,q=L.length;S<q;S++)a=L[S],X.push(a["#name"]);return X}().concat(A).join("/"),function(){var S;try{return i=C.options.validator(M,b&&b[A],i)}catch(q){return S=q,C.emit("error",S)}}()),C.options.explicitChildren&&!C.options.mergeAttrs&&typeof i=="object"){if(!C.options.preserveChildrenOrder)a={},C.options.attrkey in i&&(a[C.options.attrkey]=i[C.options.attrkey],delete i[C.options.attrkey]),!C.options.charsAsChildren&&C.options.charkey in i&&(a[C.options.charkey]=i[C.options.charkey],delete i[C.options.charkey]),Object.getOwnPropertyNames(i).length>0&&(a[C.options.childkey]=i),i=a;else if(b){b[C.options.childkey]=b[C.options.childkey]||[],P={};for(t in i)N.call(i,t)&&E(P,t,i[t]);b[C.options.childkey].push(P),delete i["#name"],Object.keys(i).length===1&&T in i&&!C.EXPLICIT_CHARKEY&&(i=i[T])}}return L.length>0?C.assignOrPush(b,A,i):(C.options.explicitRoot&&(p=i,i={},E(i,A,p)),C.resultObject=i,C.saxParser.ended=!0,C.emit("end",C.resultObject))}}(this),v=function(C){return function(u){var r,t;if(t=L[L.length-1],t)return t[T]+=u,C.options.explicitChildren&&C.options.preserveChildrenOrder&&C.options.charsAsChildren&&(C.options.includeWhiteChars||u.replace(/\\n/g,"").trim()!=="")&&(t[C.options.childkey]=t[C.options.childkey]||[],r={"#name":"__text__"},r[T]=u,C.options.normalize&&(r[T]=r[T].replace(/\s{2,}/g," ").trim()),t[C.options.childkey].push(r)),t}}(this),this.saxParser.ontext=v,this.saxParser.oncdata=function(C){return function(u){var r;if(r=v(u),r)return r.cdata=!0}}(this)},h.prototype.parseString=function(d,T){var v;T!=null&&typeof T=="function"&&(this.on("end",function(L){return this.reset(),T(null,L)}),this.on("error",function(L){return this.reset(),T(L)}));try{return d=d.toString(),d.trim()===""?(this.emit("end",null),!0):(d=f.stripBOM(d),this.options.async?(this.remaining=d,y(this.processAsync),this.saxParser):this.saxParser.write(d).close())}catch(L){if(v=L,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw v}else return this.emit("error",v),this.saxParser.errThrown=!0}},h.prototype.parseStringPromise=function(d){return new Promise(function(T){return function(v,L){return T.parseString(d,function(C,u){return C?L(C):v(u)})}}(this))},h}(O),$.parseString=function(m,h,d){var T,v,L;return d!=null?(typeof d=="function"&&(T=d),typeof h=="object"&&(v=h)):(typeof h=="function"&&(T=h),v={}),L=new $.Parser(v),L.parseString(m,T)},$.parseStringPromise=function(m,h){var d,T;return typeof h=="object"&&(d=h),T=new $.Parser(d),T.parseStringPromise(m)}}).call($)});var lr=F(J=>{(function(){"use strict";var f,s,E,O,c=function(o,l){for(var y in l)w.call(l,y)&&(o[y]=l[y]);function g(){this.constructor=o}return g.prototype=l.prototype,o.prototype=new g,o.__super__=l.prototype,o},w={}.hasOwnProperty;s=at(),f=sr(),E=cr(),O=Ft(),J.defaults=s.defaults,J.processors=O,J.ValidationError=function(o){c(l,o);function l(y){this.message=y}return l}(Error),J.Builder=f.Builder,J.Parser=E.Parser,J.parseString=E.parseString,J.parseStringPromise=E.parseStringPromise}).call(J)});var Mr={};br(Mr,{handler:()=>Lr});module.exports=Or(Mr);var bt=require("@aws-sdk/client-dynamodb");var hr=Ir(lr(),1),fr=require("@aws-sdk/client-dynamodb"),Cr=async(f,s)=>{let E={Item:{id:{S:"#SAML#"+f.id},name:{S:f.name},logoUrl:{S:f.logoUrl?f.logoUrl:""},serviceUrl:{S:f.serviceUrl},released:{BOOL:!!f.released}},ReturnConsumedCapacity:"TOTAL",TableName:process.env.AMFA_SPINFO_TABLE};console.log("storeSPInfo Input:",E);let O=await s.send(new fr.PutItemCommand(E));return console.log("storeSPInfo Output:",O),O},Ar=async f=>{console.log("getEntityId xmlUrl",f);let s=(g,I)=>{if(!g)return;let N=I.split("."),m=g;for(let h=0;h<N.length&&(m=m[N[h]],!!m);h++);return m},E=(g,I)=>s(g,I)||s(g,"md:"+I)||s(g,"ns0:"+I),O=await fetch(f);console.log("response",O);let c=await O.text();console.log("textRes",c);let o=await new hr.default.Parser().parseStringPromise(c);console.log("result",o);let l=E(o,"EntityDescriptor");console.log("entityDescriptor",l);let y=s(l,"$.entityID");return console.log("entityId",y),y},Pr=process.env.SAMLPROXY_RELOAD_URL,_r=async(f,s,E,O,c)=>{if(console.log("postResData Input:",f),f.metadataUrl){let w=await Ar(f.metadataUrl);if(w){let o=await fetch(s,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:c},body:JSON.stringify({...f,id:btoa(w),issuer:`https://cognito-idp.${process.env.AWS_REGION}.amazonaws.com/${process.env.USER_POOL_ID}`,clientId:process.env.SAML_CLIENTID,clientSecret:process.env.SAML_CLIENTSECRET,entityId:w})});console.log("samlslist post result",o);let l=await fetch(Pr,{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:c}}),y=await l.text();return console.log("samlproxy reload result",l),console.log("samlproxy reload result text",y),await Cr({id:btoa(w),name:f.name,logoUrl:f.logoUrl,serviceUrl:f.serviceUrl},E),o.json()}else return{statusCode:400,body:JSON.stringify({data:"SP creation error"})}}return{statusCode:400,body:JSON.stringify({data:"Malformat data"})}},pr=_r;var dr=new bt.DynamoDBClient({region:process.env.AWS_REGION}),yr=process.env.SAMLPROXY_API_URL,Lr=async f=>{console.info(`EVENT
`+JSON.stringify(f,null,2));let s={type:"exception",message:"Service Error"};try{if(f.requestContext.http.method==="POST"&&(!f.queryStringParameters||!f.queryStringParameters.page)){let c=JSON.parse(f.body);console.log("POST data: ",c);let w=await pr(c.data,yr,dr,null,f.headers.authorization);return{statusCode:200,headers:{"Access-Control-Allow-Headers":"Content-Type,Authorization,X-Api-Key,Content-Range,X-Requested-With","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"OPTIONS,GET,POST","Access-Control-Expose-Headers":"Content-Range","Content-Type":"application/json","Access-Control-Allow-Credentials":!0},body:JSON.stringify({data:w})}}else{let c=f.body?f.body:"",w=await fetch(yr,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:f.headers.authorization}});console.log("fetch samlurl res",w);let o=await w.json();console.log("fetch samlurl resData",o);let l=[];if(o.length>0&&o[0].id)for(var E in o){console.log("samlslist getting item with id from ddb",o[E].id);let m={TableName:process.env.AMFA_SPINFO_TABLE,Key:{id:{S:`#SAML#${o[E].id}`}}},h=null;try{let d=await dr.send(new bt.GetItemCommand(m));console.log("samlslist get spInfo from dynamodb Res",d),d?.Item?.id&&(h={logoUrl:d?.Item?.logoUrl?.S,serviceUrl:d?.Item?.serviceUrl?.S,released:d?.Item?.released?.BOOL?d?.Item?.released?.BOOL:!1})}catch(d){console.log("samlslist get spInfo from dynamodb error",d)}l.push({id:o[E].id,name:o[E].name,metadataUrl:o[E].metadataUrl,entityId:o[E].entityId,released:h?.released,logoUrl:h?.logoUrl,serviceUrl:h?.serviceUrl})}let y=parseInt(f.queryStringParameters.page),g=parseInt(f.queryStringParameters.perPage),I=(y-1)*g,N=o.length+I-1;return{statusCode:200,headers:{"Access-Control-Allow-Headers":"Content-Type,Authorization,X-Api-Key,Content-Range,X-Requested-With","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"OPTIONS,GET,POST","Access-Control-Expose-Headers":"Content-Range","Content-Range":`samls ${I}-${N}`},body:JSON.stringify({data:l,total:l.length,...c&&{PaginationToken:c}})}}}catch(c){switch(console.log("Catch an error: ",c),c.name){case"ThrottlingException":s={type:"exception",message:"Too many requests"};break;case"InvalidParameterValue":case"InvalidParameterException":s={type:"exception",message:"Invalid parameter"};break;default:s={type:"exception",message:"Service Error"};break}}return{statusCode:500,body:JSON.stringify(s)}};0&&(module.exports={handler});
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/
//# sourceMappingURL=index.js.map
